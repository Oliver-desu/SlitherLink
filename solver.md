# 核心概念

## Edge Count

- 每个“角”由一对相邻的横边和竖边组成。
- 每个角在最终解答中可以包含 **0条、1条或2条** 实线。
- 在推理过程中，角的可能性以 `EdgeCount` 枚举表示，例如 `{0,1,2}` 的子集。
- 每个格子和每个顶点都可以由两个互补的角构成。
- 角与格子、点之间有严格的数量关系：
    - **格子**中四条边的实线数量之和 = 格子内的数字。
    - **顶点**处四条边中实线数量之和 = 0 或 2（不能出现1或3条）。

### EdgeCount 操作示例

- `EdgeCount.ANY.subtract_by(3) = EdgeCount.LARGE`  
  说明：格子内数字为 3 时，如果一个角的可能性为 `{0,1,2}` ，那么其补角的可能性为 `{1,2}`，即补角必定相邻实线。

- `EdgeCount.ZERO.flip() = EdgeCount.EVEN`  
  说明：在顶点处，如果当前假设该角有 0 条实线，那么补角的可能性为 `{0,2}`，即补角应保持偶数条实线。

# Connected

- `connected` 属性记录当前所有连通端点的集合。
- 若某条尚未连接的边，如果直接连接了两个已经连通的端点，则会早日形成一个闭环（Loop）。
- 数独在完整解出前，**不能接通任何一个闭环**。
- 数独完成时，所有端点会自然收敛为一个单一闭合的 Loop。

---

# 解题流程概览

- 在推理过程中，主要通过 **设置边的存在与否（`set_edge`）** 和 **限制边的数量（`set_edge_count`）**。
- 每次调用 `set_edge` 或 `set_edge_count`，都会触发一系列自动推理：
    - 更新相邻顶点和格子的 Edge Count
    - 检查是否因为某条边的确定而导致其他边也可以确定
    - 检查连通性（Connected），防止接成早期闭环
    - 进行连锁式的独立信息传播，确定更多边的状态

通过这一套逻辑流程，可以自动推理出大量边的定位，最终完成数独的求解。
